;/*FB_PKG_DELIM*/

__d("MAddFriendNew",["DOM","MFriendingState","MLegacyDataStore","Stratcom"],(function(a,b,c,d,e,f,g){var h="m-add-friend-flyout",i="m-cancel-request";a=function(a,b,e){var f=this;this.onFriendRequestCanceled=function(a){a=a.getData();if(!a||a.userid!==f.userid)return;a=c("DOM").scry(f.unit,"*",h)[0];var b=c("DOM").scry(f.unit,"*",i)[0];d("MLegacyDataStore").get(a).not_friendable||c("DOM").show(a);c("DOM").hide(b)};this.onFriendRequestSent=function(a){a=a.getData();if(!a||a.userid!==f.userid)return;a=c("DOM").scry(f.unit,"*",h)[0];var b=c("DOM").scry(f.unit,"*",i)[0];c("DOM").hide(a);c("DOM").show(b)};this.unit=e;this.userid=b;c("Stratcom").listen(d("MFriendingState").REQUEST_SENT,null,this.onFriendRequestSent.bind(this));c("Stratcom").listen(d("MFriendingState").REQUEST_CANCELED,null,this.onFriendRequestCanceled.bind(this))};g["default"]=a}),98);
__d("MFriendDynamicSubtitle",["cx","DOM","MAnimation","MFriendingActionError","MFriendingState","MParent","Stratcom"],(function(a,b,c,d,e,f,g,h){var i="undoable-action",j="m-add-friend-request-sent",k="m-friend-request-canceled",l="m-friend-unfriended",m="m-add-friend-source-replaceable",n="m-friend-request-highlight-notice";a=function(){function a(a,b){var e=this;this.$7=function(a){a=a.getData();if(!a||!a.userid||a.userid!=e.$2)return;if(!a.error)return;e.$8(a.error)};this.$5=function(a){var b=a.getData();if(!b||!b.userid||b.userid!=e.$2)return;b=a.getType();e.$8(b)};this.$6=function(){for(var a=0;a<e.$4.length;a++)e.$4[a].remove()};this.$1=a;this.$2=b;this.$3=d("MParent").bySigil(a,i);this.$4=[c("Stratcom").listen([d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR,d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR,d("MFriendingState").REQUEST_SENT,d("MFriendingState").REQUEST_CANCELED,d("MFriendingState").UNFRIENDED],null,this.$5.bind(this)),c("Stratcom").listen("m:page:unload",null,this.$6.bind(this)),c("Stratcom").listen("friending_state_change",null,this.$7.bind(this))]}var b=a.prototype;b.$8=function(a){this.$9(),a===d("MFriendingState").REQUEST_SENT||a===d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR?this.$10(j):a===d("MFriendingState").REQUEST_CANCELED?this.$10(k):a===d("MFriendingState").UNFRIENDED?this.$10(l):a===d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR&&this.$10(m),this.$11()};b.$9=function(){this.$12(j),this.$12(m),this.$12(k),this.$12(l)};b.$12=function(a){a=c("DOM").scry(this.$3,"*",a)[0];a&&c("DOM").hide(a)};b.$10=function(a){a=c("DOM").scry(this.$3,"*",a)[0];a&&c("DOM").show(a)};b.$11=function(){var a=c("DOM").scry(this.$3,"*",n)[0];a&&d("MAnimation").animate(a,"_4z0z",4e3)};return a}();g["default"]=a}),98);
__d("MFriendingAutoScroll",["MAnimator","MFriendingState","MViewport","Stratcom"],(function(a,b,c,d,e,f,g){var h=400,i=101,j,k,l,m;function a(){o();var a=c("Stratcom").listen("m:page:unload",null,function(){a.remove(),p()})}function n(){var a=d("MViewport").getScrollPos().y,b=function(b){d("MViewport").scrollTo(0,a+b*i)};new(c("MAnimator"))().start(b,null,function(){},h)}function o(){p(!0),j=c("Stratcom").listen([d("MFriendingState").REQUEST_SENT],null,n),k=c("Stratcom").listen("click","confirm-request",n),l=c("Stratcom").listen("click",["nav-popover","feed"],p),m=c("Stratcom").listen("click",["nav-popover","requests","icon"],o)}function p(a){a===void 0&&(a=!1),j&&j.remove(),k&&k.remove(),l&&l.remove(),a===!0&&m&&m.remove()}g.setup=a}),98);
__d("MFriendsActionBubble",["DOM","MLegacyDataStore","MURI","Stratcom"],(function(a,b,c,d,e,f,g){var h="m-unfriend-request",i="/friendlists/edit",j="manage-friend-list",k="m-follow-request",l="m-unfollow-request";a=function(){function a(a){var b=this;this.$3=function(a){var d=b.$1.getContentRoot(),e=a.getNode("popup-action-trigger"),f=c("DOM").scry(d,"*",h)[0];b.$5(e,f,a);f=c("DOM").scry(d,"*",j)[0];b.$5(e,f,a);b.$6(e,d,a)};this.$4=function(a){var e=a.getNode(j);if(e!=null){e=d("MLegacyDataStore").get(e);e=new(c("MURI"))(i).setQueryData({subject_id:e.id,ref_param:e.manage_list_ref});b.$7(e,a)}};this.$1=a;this.$2=null}var b=a.prototype;b.enable=function(){this.$2=[c("Stratcom").listen("click","are-friends-popup",this.$3.bind(this)),c("Stratcom").listen("click",j,this.$4.bind(this))]};b.$6=function(a,b,e){if(a==null)return;var f=d("MLegacyDataStore").get(a).is_following;if(f===null)return;var g=c("DOM").scry(b,"*",l)[0];this.$5(a,g,e);b=c("DOM").scry(b,"*",k)[0];this.$5(a,b,e);f?(c("DOM").show(g),c("DOM").hide(b)):(c("DOM").show(b),c("DOM").hide(g))};b.$5=function(a,b,c){if(!a||!b)return;a=d("MLegacyDataStore").get(a);a.flyoutEvent=c;d("MLegacyDataStore").set(b,a)};b.$7=function(a,b){window.FW_ENABLED||!window.APP_ENABLED?(b.kill(),window.location.href=a.toString()):c("Stratcom").invoke("go",null,{uri:a})};b.disable=function(){while((a=this.$2)==null?void 0:a.length){var a;this.$2.pop().remove()}};return a}();g["default"]=a}),98);
__d("MSwipeInfiniteScrollerLoadMore",["DOM","DataAttributeUtils","MLegacyDataStore"],(function(a,b,c,d,e,f,g){var h=0,i=200;function a(a){if(!a)return;a=document.getElementById(a);if(!a)return;var b=d("MLegacyDataStore").get(a);if(!b||!b.scrollArea)return;var e=c("DOM").scry(a,"*","m-swipe-pymk-item")[0];e=c("DataAttributeUtils").getDataAttribute(e,"data-unit-size");e||(e=i);var f=b.scrollArea;if(f.getAutomaticPaging())f.reflow("auto");else{f=c("DOM").find(a,"*","scroll-area-body").children;a=[h];for(var g=1;g<f.length;g++)a[g]=a[g-1]+parseInt(e,10);b.scrollArea.reflow(a)}}g.reflow=a}),98);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/impression/",{})}),null);
__d("XFeedEgoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/load/",{loading_id:{type:"String",required:!0},ids:{type:"IntVector",required:!0},service_id:{type:"String",required:!0},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0}})}),null);
__d("MSwipeInfiniteScroller",["csx","cx","CSS","DOM","DataAttributeUtils","MFriendingState","MLegacyDataStore","MParent","MRequest","MRequestTypes","MScrollAreaHelper","MSwipeInfiniteScrollerLoadMore","MURI","Parent","Stratcom","XEgoHideLoggingController","XFeedEgoImpressionLoggingController","XFeedEgoLoadController"],(function(a,b,c,d,e,f,g,h,i){var j=3,k={};({});function a(a){var b=a.getData().event;if(!b.getNode("m-swipe-pymk-item")&&!b.getNode("m-swipe-pysf-item"))return;var e=b.getTarget(),f=d("MLegacyDataStore").get(e);f._delayTimer&&window.clearTimeout(f._delayTimer);f._delayTimer=window.setTimeout(function(){f.scrollArea===void 0&&(f.scrollArea=d("MScrollAreaHelper").findScrollArea(e,14)),f.scrollArea&&(f.scrollArea.scrollByPages(1),c("Stratcom").invoke("MSwipeInfiniteScroller:autoScrollStart",null,b))},1e3);f._touchstartListener&&f._touchstartListener.remove();f._touchstartListener=c("Stratcom").listen("touchstart",null,function(a){window.clearTimeout(f._delayTimer),delete f._delayTimer,f._touchstartListener.remove(),delete f._touchstartListener});if(b.getNode("m-swipe-pymk-item")){a=d("MParent").bySigil(e,"undoable-action");if(!a)return;a=d("DOM").scry(a,"*","pymk-remove-button")[0];a&&c("CSS").hide(a)}}function b(a){a=a.getData().event;if(!a.getNode("m-swipe-pymk-item"))return;a=a.getTarget();a=d("MParent").bySigil(a,"undoable-action");if(!a)return;a=d("DOM").scry(a,"*","pymk-remove-button")[0];a&&c("CSS").show(a)}function e(a){a=a.getData();var b=a.scrollarea;m(b,a.container)}function l(a){a=JSON.parse(c("DataAttributeUtils").getDataFt(a));if(!a)return;var b=a.ego_id,d=a.qid;a=a.mf_story_key;var e=(d+a).toString();if(!b||k[e]&&k[e][b])return;var f=c("XFeedEgoImpressionLoggingController").getURIBuilder().getURI();new(c("MRequest"))(f).setMethod("POST").setData({ego_id:b,qid:d,mf_story_key:a}).send();k[e]||(k[e]={});k[e][b]=!0}function m(a,b){var c=a.getScrollPageIndex()+1,d=a.getScrollPageCount();c+j>=d&&n(b);c=a.getChildrenOnCurrentPage();for(d=0;d<c.length;d++)l(c[d])}function n(a){var b=d("DOM").scry(a,"*","m-infinite-swipe-loading")[0];if(!b)return;var e=d("MLegacyDataStore").get(b);if(e.processing)return;d("MLegacyDataStore").set(b,{processing:!0});if(e.use_uri){new(c("MRequest"))(new(c("MURI"))(e.uri).toString()).setType(d("MRequestTypes").DEPENDENT).send();return}e=[];a=a.children;var f,g;for(var h=0;h<a.length;h++){h===0&&(g=a[h].getAttribute("data-service"));var i=c("DataAttributeUtils").getDataFt(a[h]);if(!i)continue;h===0&&(f=JSON.parse(i));i=JSON.parse(i).ego_id;e.push(i)}a=c("XFeedEgoLoadController").getURIBuilder().setString("loading_id",b.id).setIntVector("ids",e).setString("service_id",g||"pymk").setString("location","inline_feed").setInt("qid",(i=f)==null?void 0:i.qid).setInt("mf_story_key",(h=f)==null?void 0:h.mf_story_key).getURI();e=new(c("MRequest"))(new(c("MURI"))(a).toString()).setType(d("MRequestTypes").DEPENDENT);i=function(){var a=d("Parent").bySelector(b,".scrollArea");d("MSwipeInfiniteScrollerLoadMore").reflow(a==null?void 0:a.id);d("MLegacyDataStore").set(b,{processing:!1})};e.listen("done",i);e.send()}function f(a){a=a.getNode("m-swipe-pymi-item");if(!a)return;var b=d("MScrollAreaHelper").findScrollArea(a);if(!b)return;window.setTimeout(function(){b.scrollByPages(1)},500)}function h(a){var b=a.getNode("m-swipe-pymk-item"),e="PYMK";b||(b=a.getNode("m-swipe-pysf-item"),e="PYSF");b||(b=a.getNode("m-swipe-pymi-item"),e="PYMI");if(!b)return;var f=d("MScrollAreaHelper").findScrollArea(b);if(!f)return;a=JSON.parse(c("DataAttributeUtils").getDataFt(b));if(a&&a.ego_id){a=c("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id",e).getURI();new(c("MRequest"))(a).send()}c("CSS").addClass(b,"_3m57");if(!f._canUseHscroll&&!f._isHorizontal){d("DOM").remove(b);return}window.setTimeout(function(){d("DOM").remove(b),d("MSwipeInfiniteScrollerLoadMore").reflow(f._element.id),m(f,f._content)},500);e=f.getScrollPageIndex()+1;a=f.getChildAtPageIndex(e);l(a)}c("Stratcom").listen("MScrollArea:scrollend","infiniteScroller",e);c("Stratcom").listen("click","invite-contact-button",f);c("Stratcom").listen(d("MFriendingState").REQUEST_SENT,null,a);c("Stratcom").listen(d("MFriendingState").REQUEST_CANCELED,null,b);c("Stratcom").listen("click","m-swipe-xout",h);g.logImpressionForElement=l}),98);
__d("MSwipeFirstUnitImpression",["MLegacyDataStore","MSwipeInfiniteScroller","MViewport","Stratcom","Vector"],(function(a,b,c,d,e,f,g){function a(a,b){if(b){a=d("MLegacyDataStore").get(b);if(a&&a.scrollArea)h(a.scrollArea);else var e=c("Stratcom").listen("MScrollArea:create",null,function(a){a.getData().element.getAttribute("id")===b.id&&(h(a.getData().scrollarea),e&&e.remove())})}}var h=function(a){var b=a.getElement();if(i(b))j(a);else var d=c("Stratcom").listen("scroll",null,function(){i(b)&&(j(a),d&&d.remove())})},i=function(a){var b=d("MViewport").getHeight()+d("MViewport").getScrollTop(),e=a.clientHeight;a=c("Vector").getElementPosition(a).y;a=a+e;return a&&b>=a},j=function(a){var b=a.getChildAtPageIndex(0);b=Math.min(Math.floor(a.getElement().offsetWidth/b.offsetWidth),a.getNumChildren());for(var c=0;c<b;c++)d("MSwipeInfiniteScroller").logImpressionForElement(a.getChildAtPageIndex(c))};g.setup=a}),98);
__d("MLayerHideOnCloseClick",["DOM"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=null,this.$2=null,this.$3=a}var c=a.prototype;c.enable=function(){this.$1=[this.$3.addListener("show",this.$4.bind(this)),this.$3.addListener("hide",this.$5.bind(this))],this.$3.isShown()&&this.$4()};c.disable=function(){this.$5();while(this.$1.length)this.$1.pop().remove();this.$1=null};c.$5=function(){this.$2&&this.$2.remove()};c.$4=function(){this.$2=b("DOM").listen(this.$3.getRoot(),"click","mlayer-hide-on-click",this.$3.hide.bind(this.$3))};return a}();e.exports=a}),null);
__d("MLayerHideOnScroll",["Stratcom"],(function(a,b,c,d,e,f){var g=5;a=function(){"use strict";function a(a){this.$1=null,this.$2=null,this.$3=a,this.$4=null}var c=a.prototype;c.enable=function(){this.$1=[this.$3.addListener("show",this.$5.bind(this)),this.$3.addListener("hide",this.$6.bind(this))],this.$3.isShown()&&this.$5()};c.disable=function(){this.$6();while(this.$1.length)this.$1.pop().remove();this.$1=null};c.$6=function(){this.$2&&this.$2.remove()};c.$5=function(){var a=this,c=window;this.$4=c.scrollY;this.$2=b("Stratcom").listen("scroll",null,function(){var b=c.scrollY;Math.abs(a.$4-b)>=g&&a.$3.hide()})};return a}();e.exports=a}),null);