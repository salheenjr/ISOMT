;/*FB_PKG_DELIM*/

__d("CameraPostDirectMarkSeenMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24249837217949194"}),null);
__d("CameraPostDirectMarkSeenMutation.graphql",["CameraPostDirectMarkSeenMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f=[e],g={kind:"InlineFragment",selections:f,type:"User",abstractKey:null},h=[d],i={alias:null,args:null,concreteType:"DirectMessage",kind:"LinkedField",name:"latest_message",plural:!1,selections:h,storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"viewer_replays_left",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CameraPostDirectMarkSeenMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageThreadUpdateSeenStateResponsePayload",kind:"LinkedField",name:"direct_message_thread_update_seen_state",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThread",kind:"LinkedField",name:"thread",plural:!1,selections:[d,{alias:null,args:null,concreteType:"DirectMessage",kind:"LinkedField",name:"root_message",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"message_owner",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"camera_post_message_owner",plural:!1,selections:[g],storageKey:null}],storageKey:null},i,j],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CameraPostDirectMarkSeenMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageThreadUpdateSeenStateResponsePayload",kind:"LinkedField",name:"direct_message_thread_update_seen_state",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThread",kind:"LinkedField",name:"thread",plural:!1,selections:[d,{alias:null,args:null,concreteType:"DirectMessage",kind:"LinkedField",name:"root_message",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"message_owner",plural:!1,selections:[e,d],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"camera_post_message_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g,{kind:"InlineFragment",selections:h,type:"Node",abstractKey:"__isNode"}],storageKey:null},d],storageKey:null},i,j],storageKey:null}],storageKey:null}]},params:{id:b("CameraPostDirectMarkSeenMutation_mobileRelayOperation"),metadata:{},name:"CameraPostDirectMarkSeenMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CameraPostReplyMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7782101521815326"}),null);
__d("CameraPostReplyMutation.graphql",["CameraPostReplyMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:[{kind:"Literal",name:"height",value:200},{kind:"Literal",name:"quality",value:"HIGH"},{kind:"Literal",name:"width",value:200}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:'profile_picture(height:200,quality:"HIGH",width:200)'},g=[e,f],h={kind:"InlineFragment",selections:g,type:"User",abstractKey:null},i={alias:null,args:null,kind:"ScalarField",name:"message_text",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CameraPostReplyMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageReplyResponsePayload",kind:"LinkedField",name:"direct_message_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThread",kind:"LinkedField",name:"thread",plural:!1,selections:[d,{alias:null,args:null,concreteType:"DirectMessage",kind:"LinkedField",name:"latest_message",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"message_owner",plural:!1,selections:g,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"camera_post_message_owner",plural:!1,selections:[h],storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CameraPostReplyMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageReplyResponsePayload",kind:"LinkedField",name:"direct_message_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThread",kind:"LinkedField",name:"thread",plural:!1,selections:[d,{alias:null,args:null,concreteType:"DirectMessage",kind:"LinkedField",name:"latest_message",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"message_owner",plural:!1,selections:[e,f,d],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"camera_post_message_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},h,{kind:"InlineFragment",selections:[d],type:"Node",abstractKey:"__isNode"}],storageKey:null},i,d],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CameraPostReplyMutation_mobileRelayOperation"),metadata:{},name:"CameraPostReplyMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBStoriesAudienceModeMutationCallMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4901186696632505"}),null);
__d("FBStoriesAudienceModeMutationCallMutation.graphql",["FBStoriesAudienceModeMutationCallMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"audience_mode",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FBStoriesAudienceModeMutationCallMutation",selections:[{alias:null,args:c,concreteType:"UnifiedStoriesAudienceModeUpdateResponsePayload",kind:"LinkedField",name:"unified_stories_audience_mode_update",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoriesSetting",kind:"LinkedField",name:"unified_stories_setting",plural:!1,selections:[d],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FBStoriesAudienceModeMutationCallMutation",selections:[{alias:null,args:c,concreteType:"UnifiedStoriesAudienceModeUpdateResponsePayload",kind:"LinkedField",name:"unified_stories_audience_mode_update",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoriesSetting",kind:"LinkedField",name:"unified_stories_setting",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("FBStoriesAudienceModeMutationCallMutation_mobileRelayOperation"),metadata:{},name:"FBStoriesAudienceModeMutationCallMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBStoriesDeleteMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6998623393541648"}),null);
__d("FBStoriesDeleteMutation.graphql",["FBStoriesDeleteMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"StoriesDeleteResponsePayload",kind:"LinkedField",name:"stories_delete",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deleted_story_thread_ids",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FBStoriesDeleteMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FBStoriesDeleteMutation",selections:c},params:{id:b("FBStoriesDeleteMutation_mobileRelayOperation"),metadata:{},name:"FBStoriesDeleteMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBStoriesMuteMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5114267331998397"}),null);
__d("FBStoriesMuteMutation.graphql",["FBStoriesMuteMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"UserCameraPostStoryUnfollowResponsePayload",kind:"LinkedField",name:"user_camera_post_story_unfollow",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FBStoriesMuteMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FBStoriesMuteMutation",selections:c},params:{id:b("FBStoriesMuteMutation_mobileRelayOperation"),metadata:{},name:"FBStoriesMuteMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4926549267424636"}),null);
__d("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation.graphql",["FBStoriesUnifiedSeenReceiptLastSeenTimeMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"StorySeenReceiptsLastSeenTimeUpdateResponsePayload",kind:"LinkedField",name:"story_seen_receipts_last_seen_time_update",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cache_id",storageKey:null},{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"seen_receipts_last_seen_time",storageKey:null},{alias:"seenReceiptUnseenCount",args:[{kind:"Literal",name:"type",value:"FRIENDS"}],concreteType:"ApproximateCount",kind:"LinkedField",name:"seen_receipt_unseen_count",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:'seen_receipt_unseen_count(type:"FRIENDS")'}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FBStoriesUnifiedSeenReceiptLastSeenTimeMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FBStoriesUnifiedSeenReceiptLastSeenTimeMutation",selections:c},params:{id:b("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation_mobileRelayOperation"),metadata:{},name:"FBStoriesUnifiedSeenReceiptLastSeenTimeMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBStoriesVotePollMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7334118923296785"}),null);
__d("FBStoriesVotePollMutation.graphql",["FBStoriesVotePollMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VoteStoryCardPollResponsePayload",kind:"LinkedField",name:"vote_story_card_poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPoll",kind:"LinkedField",name:"story_card_poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_vote",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPollOption",kind:"LinkedField",name:"poll_options",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vote_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_vote_index",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FBStoriesVotePollMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FBStoriesVotePollMutation",selections:c},params:{id:b("FBStoriesVotePollMutation_mobileRelayOperation"),metadata:{},name:"FBStoriesVotePollMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("ReactionStickerStoryCardReactMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4919295801491622"}),null);
__d("ReactionStickerStoryCardReactMutation.graphql",["ReactionStickerStoryCardReactMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ReactStoryCardReactionStickerResponsePayload",kind:"LinkedField",name:"react_story_card_reaction_sticker",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardReactionSticker",kind:"LinkedField",name:"story_card_reaction_sticker",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ReactionStickerStoryCardReactMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ReactionStickerStoryCardReactMutation",selections:c},params:{id:b("ReactionStickerStoryCardReactMutation_mobileRelayOperation"),metadata:{},name:"ReactionStickerStoryCardReactMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("StoriesArchiveDeletionMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="3861427497315608"}),null);
__d("StoriesArchiveDeletionMutation.graphql",["StoriesArchiveDeletionMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ArchivedStoryCardDeleteResponsePayload",kind:"LinkedField",name:"archived_story_card_delete",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deleted_archived_story_card_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StoriesArchiveDeletionMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StoriesArchiveDeletionMutation",selections:c},params:{id:b("StoriesArchiveDeletionMutation_mobileRelayOperation"),metadata:{},name:"StoriesArchiveDeletionMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("UnifiedStoriesArchiveSavingModeMutation_mobileRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7089598087781135"}),null);
__d("UnifiedStoriesArchiveSavingModeMutation.graphql",["UnifiedStoriesArchiveSavingModeMutation_mobileRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"UnifiedStoriesArchiveSavingModeUpdateResponsePayload",kind:"LinkedField",name:"unified_stories_archive_saving_mode_update",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoriesSetting",kind:"LinkedField",name:"unified_stories_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_archive_saving_mode",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"UnifiedStoriesArchiveSavingModeMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"UnifiedStoriesArchiveSavingModeMutation",selections:c},params:{id:b("UnifiedStoriesArchiveSavingModeMutation_mobileRelayOperation"),metadata:{},name:"UnifiedStoriesArchiveSavingModeMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MStoriesBottomSheetController",["cx","CSS","DOM","MStoriesStratcomEvents","Run","Stratcom","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i="_7q7v";a=function(){function a(){var a=this;this.$1=null;this.$4=function(){a.$2.forEach(function(a){return a.remove()})};this.$2=[c("Stratcom").listen(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null,function(){return a.$3()})];d("Run").onLeave(this.$4)}var b=a.prototype;b.setContainer=function(a){this.$1=a};b.$5=function(){return c("nullthrows")(this.$1)};b.showBottomSheet=function(a){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER),c("CSS").removeClass(this.$5(),i),d("DOM").setContent(this.$5(),a)};b.$3=function(){c("CSS").hasClass(this.$5(),i)||c("CSS").addClass(this.$5(),i)};return a}();b=new a();g["default"]=b}),98);
__d("CameraPostDirectMarkSeenMutation",["CameraPostDirectMarkSeenMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("CameraPostDirectMarkSeenMutation.graphql");c=a;g["default"]=c}),98);
__d("CameraPostReplyMutation",["CameraPostReplyMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("CameraPostReplyMutation.graphql");c=a;g["default"]=c}),98);
__d("FBStoriesAudienceModeMutationCallMutation",["FBStoriesAudienceModeMutationCallMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("FBStoriesAudienceModeMutationCallMutation.graphql");c=a;g["default"]=c}),98);
__d("FBStoriesDeleteMutation",["FBStoriesDeleteMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("FBStoriesDeleteMutation.graphql");c=a;g["default"]=c}),98);
__d("FBStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a="event";b="followee";c="friend";d="group";e="missingStoryData";var g="page",h="self",i="promotion",j="open_media",k="delete_media_attempted",l="attempt_to_send_reply",m="reaction_sticker_interacted",n="open_seen_summary",o="open_story",p="close_story",q="story_tray_load",r="send_story_failed",s="send_story_succeed",t="reply_attempt_completed",u="story_navigation",v="reshared_story_tap",w="reshared_story_view_story_tap",x={CLOSE_STORY:{CLICK_RIGHT:"click_right",CLICK_LEFT:"click_left",AUTO_JUMP:"auto_jump",AUTO_EXIT:"auto_exit",CLICK_EXIT:"click_exit",SWIPE_RIGHT:"swipe_right",SWIPE_LEFT:"swipe_left",SWIPE_EXIT:"swipe_exit",SWIPE_DOWN_EXIT:"swipe_down_exit",CLOSE_BUTTON_EXIT:"close_button_exit",BACK_BUTTON_EXIT:"back_button_exit"}},y="closeFromClickingOnModal",z="closeFromClickingOnModalCloseButton",A="closeFromLastStoryFinishing",B={ARCHIVE:"archive",POST_HEADER:"post_header_actor_photo",STORY_TRAY:"story_tray",IN_FEED:"in_feed",UNKNOWN:"unknown"};f.EVENT_STORY=a;f.FOLLOWEE_STORY=b;f.FRIEND_STORY=c;f.GROUP_STORY=d;f.MISSING_STORY_DATA=e;f.PAGE_STORY=g;f.SELF_STORY=h;f.STORY_PROMOTION=i;f.ACTION_OPEN_MEDIA=j;f.ACTION_DELETE_MEDIA=k;f.ACTION_SEND_REPLY_ATTEMPT=l;f.ACTION_SEND_REACTION_STICKER_INTERACTED=m;f.ACTION_OPEN_SEEN_SUMMARY=n;f.ACTION_OPEN_STORY=o;f.ACTION_CLOSE_STORY=p;f.ACTION_TRAY_LOAD=q;f.ACTION_SEND_STORY_FAILED=r;f.ACTION_SEND_STORY_SUCCEEDED=s;f.ACTION_REPLY_ATTEMPT_COMPLETED=t;f.ACTION_STORY_NAVIGATION=u;f.INTERACTION_TAP_RESHARED_STORY=v;f.INTERACTION_TAP_RESHARED_TOOLTIP=w;f.GESTURES=x;f.SOURCE_CLOSE_FROM_MODAL=y;f.SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON=z;f.SOURCE_CLOSE_FROM_LAST_STORY_FINISHING=A;f.SOURCES=B}),66);
__d("FBStoriesMuteMutation",["FBStoriesMuteMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("FBStoriesMuteMutation.graphql");c=a;g["default"]=c}),98);
__d("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation",["FBStoriesUnifiedSeenReceiptLastSeenTimeMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation.graphql");c=a;g["default"]=c}),98);
__d("FBStoriesVotePollMutation",["FBStoriesVotePollMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("FBStoriesVotePollMutation.graphql");c=a;g["default"]=c}),98);
__d("AttemptToSendReplyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743085");b=d("FalcoLoggerInternal").create("attempt_to_send_reply",a);e=b;g["default"]=e}),98);
__d("CloseStoryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743371");b=d("FalcoLoggerInternal").create("close_story",a);e=b;g["default"]=e}),98);
__d("CloseStoryGesture",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CLICK_RIGHT:"click_right",CLICK_LEFT:"click_left",AUTO_JUMP:"auto_jump",AUTO_EXIT:"auto_exit",CLICK_EXIT:"click_exit",SWIPE_RIGHT:"swipe_right",SWIPE_LEFT:"swipe_left",SWIPE_EXIT:"swipe_exit",SWIPE_DOWN_EXIT:"swipe_down_exit",CLOSE_BUTTON_EXIT:"close_button_exit",BACK_BUTTON_EXIT:"back_button_exit",isExitGesture:function(a){switch(a){case"click_right":case"click_left":case"auto_jump":case"swipe_right":case"swipe_left":return!1;case"swipe_exit":case"auto_exit":case"click_exit":case"swipe_down_exit":case"close_button_exit":case"back_button_exit":return!0}return!1},fromString:function(a){if(!a)return null;switch(a){case"click_right":case"click_left":case"auto_jump":case"auto_exit":case"click_exit":case"swipe_right":case"swipe_left":case"swipe_exit":case"swipe_down_exit":case"close_button_exit":case"back_button_exit":return a;default:return null}}});f["default"]=a}),66);
__d("MStoriesSessionInfo",[],(function(a,b,c,d,e,f){"use strict";a={_source:null,_traySessionID:null,_viewerSessionID:null,_feedUnitTrackingString:null,_viewerSheetSessionID:null,_feedUnitID:null,setViewerSessionID:function(a){this._viewerSessionID=a},getViewerSessionID:function(){return this._viewerSessionID},setTraySessionID:function(a){this._traySessionID=a},getTraySessionID:function(){return this._traySessionID},setSource:function(a){this._source=a},getSource:function(){return this._source},setFeedUnitTrackingString:function(a){this._feedUnitTrackingString=a},getFeedUnitTrackingString:function(){return this._feedUnitTrackingString},setFeedUnitID:function(a){this._feedUnitID=a},getFeedUnitID:function(){return this._feedUnitID},setViewerSheetSessionID:function(a){this._viewerSheetSessionID=a},getViewerSheetSessionID:function(){return this._viewerSheetSessionID}};e.exports=a}),null);
__d("OpenMediaFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744082");b=d("FalcoLoggerInternal").create("open_media",a);e=b;g["default"]=e}),98);
__d("OpenStoryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744084");b=d("FalcoLoggerInternal").create("open_story",a);e=b;g["default"]=e}),98);
__d("StoriesInteractiveFeedbackFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744405");b=d("FalcoLoggerInternal").create("stories_interactive_feedback",a);e=b;g["default"]=e}),98);
__d("StoryNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744411");b=d("FalcoLoggerInternal").create("story_navigation",a);e=b;g["default"]=e}),98);
__d("MStoriesLoggingUtils",["AttemptToSendReplyFalcoEvent","Banzai","BanzaiLogger","CloseStoryFalcoEvent","CloseStoryGesture","FBStoriesLoggingConstants","MStoriesSessionInfo","OpenMediaFalcoEvent","OpenStoryFalcoEvent","StoriesInteractiveFeedbackFalcoEvent","StoryNavigationFalcoEvent","WebSession"],(function(a,b,c,d,e,f){"use strict";var g=!1;function h(a,c,d){return{extra_client_data:JSON.stringify({story_size:c.number_of_media}),gesture:d,name:a,number_media:c==null?void 0:c.number_of_media,media_index:c==null?void 0:c.media_index,media_type:c.media_type,story_owner:c.owner_id,story_owner_type:c.owner_type,tray_session_id:b("MStoriesSessionInfo").getTraySessionID(),viewer_session_id:b("MStoriesSessionInfo").getViewerSessionID(),client_viewer_session_id:b("MStoriesSessionInfo").getViewerSessionID(),card_id:c.thread_id,thread_id:c.thread_id,source:b("MStoriesSessionInfo").getSource(),product_surface:"mtouch",stories_tray_feed_unit_tracking_string:b("MStoriesSessionInfo").getFeedUnitTrackingString()}}function i(a){return{gesture:a.gesture||"",has_new_content:a.has_new_content,media_id:a.client_media_id,media_type:a.media_type,number_viewers:a.number_viewers,source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:a.story_index,story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:a.thread_count,thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string}}e.exports={resetCanLogCloseStoryExit:function(){g=!1},logStoryNavigation:function(a,c,d){d===void 0&&(d={});a=h(b("FBStoriesLoggingConstants").ACTION_STORY_NAVIGATION,a,c);a=babelHelpers["extends"]({},d,a);var e={gesture:a.gesture,media_id:a.client_media_id,media_type:a.media_type,number_viewers:a.number_viewers,source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:a.story_index,story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:a.thread_count,thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string};b("StoryNavigationFalcoEvent").log(function(){return e});b("Banzai").post("fb_stories_insights_logging_banzai",a)},logCloseStory:function(a,c,d){d===void 0&&(d={});if(g&&b("CloseStoryGesture").isExitGesture(c))return;a=h(b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY,a,c);a=babelHelpers["extends"]({},d,a);var e={gesture:a.gesture,has_new_content:a.has_new_content,media_id:a.client_media_id,media_type:a.media_type,number_viewers:(d=a.number_viewers)==null?void 0:d.toString(),source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:(d=a.story_index)==null?void 0:d.toString(),story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:(d=a.thread_count)==null?void 0:d.toString(),thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string};b("CloseStoryFalcoEvent").log(function(){return e});b("Banzai").post("fb_stories_insights_logging_banzai",a);b("CloseStoryGesture").isExitGesture(c)&&(g=!0)},log:function(a){a.source==="in_feed"&&a.stories_tray_feed_unit_tracking_string==null&&(a.stories_tray_feed_unit_tracking_string=b("MStoriesSessionInfo").getFeedUnitTrackingString()),b("BanzaiLogger").log("DirectMessagingLoggerConfig",a)},logWithFalco:function(a){a.source==="in_feed"&&a.stories_tray_feed_unit_tracking_string==null&&(a.stories_tray_feed_unit_tracking_string=b("MStoriesSessionInfo").getFeedUnitTrackingString());if(a.name==="open_media"){var c={gesture:a.gesture,media_id:a.client_media_id,media_type:a.media_type,number_viewers:a.number_viewers,source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:a.story_index,story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:a.thread_count,thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string};b("OpenMediaFalcoEvent").log(function(){return babelHelpers["extends"]({},c,{sid:b("WebSession").getId()})})}else if(a.name==="open_story"){var d,e={gesture:a.gesture,has_new_content:a.has_new_content,media_id:a.client_media_id,media_type:a.media_type,number_viewers:(d=a.number_viewers)==null?void 0:d.toString(),source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:(d=a.story_index)==null?void 0:d.toString(),story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:(d=a.thread_count)==null?void 0:d.toString(),thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string};b("OpenStoryFalcoEvent").log(function(){return e})}else if(a.name==="close_story"){var f={gesture:a.gesture,has_new_content:a.has_new_content,media_id:a.client_media_id,media_type:a.media_type,number_viewers:(d=a.number_viewers)==null?void 0:d.toString(),source:a.source,stories_tray_feed_unit_tracking_string:a.stories_tray_feed_unit_tracking_string,story_index:(d=a.story_index)==null?void 0:d.toString(),story_owner:a.story_owner,story_owner_type:a.story_owner_type,story_size:(d=a.thread_count)==null?void 0:d.toString(),thread_id:a.card_id,tray_session_id:a.tray_session_id,viewer_session_id:a.client_viewer_session_id,tracking_string:a.tracking_string};b("CloseStoryFalcoEvent").log(function(){return f})}else a.name==="open_seen_summary"?b("StoriesInteractiveFeedbackFalcoEvent").log(function(){return{action:b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY,thread_id:a.card_id,tray_session_id:b("MStoriesSessionInfo").getTraySessionID(),viewer_session_id:b("MStoriesSessionInfo").getViewerSessionID(),viewer_sheet_session_id:b("MStoriesSessionInfo").getViewerSheetSessionID(),viewer_count:a.number_viewers,new_viewer_count:a.new_viewer_count,viewer_sheet_open_source:a.viewer_sheet_open_source}}):a.name===b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT?b("AttemptToSendReplyFalcoEvent").log(function(){var b=i(a);return{gesture:b.gesture,media_id:b.media_id,media_type:b.media_type,number_viewers:b.number_viewers,source:b.source,story_index:b.story_index,story_owner:b.story_owner,story_owner_type:b.story_owner_type,story_size:b.story_size,thread_id:b.thread_id,tray_session_id:b.tray_session_id,viewer_session_id:b.viewer_session_id,tracking_string:b.tracking_string}}):b("BanzaiLogger").log("DirectMessagingLoggerConfig",a)}}}),null);
__d("ReactionStickerStoryCardReactMutation",["ReactionStickerStoryCardReactMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("ReactionStickerStoryCardReactMutation.graphql");c=a;g["default"]=c}),98);
__d("StoriesArchiveDeletionMutation",["StoriesArchiveDeletionMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("StoriesArchiveDeletionMutation.graphql");c=a;g["default"]=c}),98);
__d("UnifiedStoriesArchiveSavingModeMutation",["UnifiedStoriesArchiveSavingModeMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("UnifiedStoriesArchiveSavingModeMutation.graphql");c=a;g["default"]=c}),98);
__d("MStoriesMutationAPIs",["Bootloader","CameraPostDirectMarkSeenMutation","CameraPostReplyMutation","CurrentUser","FBLogger","FBStoriesAudienceModeMutationCallMutation","FBStoriesDeleteMutation","FBStoriesLoggingConstants","FBStoriesMuteMutation","FBStoriesUnifiedSeenReceiptLastSeenTimeMutation","FBStoriesVotePollMutation","MStoriesLoggingUtils","MStoriesSessionInfo","Promise","ReactionStickerStoryCardReactMutation","RelayFBEnvironment","RelayModern","StoriesArchiveDeletionMutation","UnifiedStoriesArchiveSavingModeMutation","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="LIGHT_WEIGHT",i=function(a,b){b=(b==null?void 0:b.errors)||[];b.forEach(function(d){var b=d==null?void 0:d.error;if(b instanceof Error)c("FBLogger")("fbstories").catching(b).mustfix(a);else{b=JSON.stringify(b);b==null&&(b=JSON.stringify(d));b&&b.length>500&&(b=b.substr(0,500));c("FBLogger")("fbstories").mustfix(a+" "+b)}})},j=function(a,b,e,f,g){c("Bootloader").loadModules(["MStoriesTypedLogger","StoriesInteractiveFeedbackFalcoEvent"],function(c,h){var i=null,j=b==null;switch(a){case"reaction_sticker_react":i=d("FBStoriesLoggingConstants").ACTION_SEND_REACTION_STICKER_INTERACTED;break}g!=null&&h.log(function(){return{action:d("FBStoriesLoggingConstants").ACTION_REPLY_ATTEMPT_COMPLETED,story_reply_type:a,success:j,thread_id:g,tray_session_id:d("MStoriesSessionInfo").getTraySessionID(),viewer_session_id:d("MStoriesSessionInfo").getViewerSessionID()}});i!=null&&new c().setCameraPostType(e).setName(i).setStoryOwner(f).setReplyType(a).setCardID(g).log()},"MStoriesMutationAPIs")};e=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesDeleteMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),story_thread_ids:[a]}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})};f=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("StoriesArchiveDeletionMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),archived_story_card_id:a}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})};var k=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesMuteMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),user_id:a,should_unfollow_user_story:!0}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})},l=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesMuteMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),user_id:a,should_unfollow_user_story:!1}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})},m=function(a,e,f,g,h){d("MStoriesLoggingUtils").logWithFalco({card_id:a,name:d("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT,story_owner:g,tray_session_id:d("MStoriesSessionInfo").getTraySessionID(),viewer_session_id:d("MStoriesSessionInfo").getViewerSessionID()});var k={client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),thread_id:a,message:e};return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("CameraPostReplyMutation"),variables:{input:k},onCompleted:function(c){j(h,null,f,g,a);return b(c)},onError:function(b){i("Error sending message",b),j(h,b,f,g,a),e(b)}})})},n=function(a,e,f,g,k){var l="light_weight",m={client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),thread_id:a,message:g,story_reply_type:h,is_lightweight_reaction:!0,lightweight_reaction_actions:{reaction:g,offsets:[k||0]}};return new(b("Promise"))(function(b,g){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("CameraPostReplyMutation"),variables:{input:m},onCompleted:function(c){j(l,null,e,f,a);return b(c)},onError:function(b){i("Error sending message",b),j(l,b,e,f,a),g(b)}})})},o=function(a,e){var f={client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),thread_id:a,story_id:e};return new(b("Promise"))(function(a,b){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("CameraPostDirectMarkSeenMutation"),variables:{input:f},onCompleted:function(c,d){return d!=null&&d.length>0?b(d[0]):a(c)},onError:function(a){b(a)}})})},p=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesAudienceModeMutationCallMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),audience_mode:a}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})},q=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("UnifiedStoriesArchiveSavingModeMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),saving_mode:a}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})};function a(a,e,f,g){return new(b("Promise"))(function(b,h){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesVotePollMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),story_card_poll_id:a,option:e,actor_id:c("CurrentUser").getID()}},onCompleted:function(a){j("poll_vote",null,null,g,f);return b(a)},onError:function(a){i("Error sending message",a),j("poll_vote",a,null,g,f),h(a)}})})}var r=function(a,e,f,g){return new(b("Promise"))(function(b,h){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("ReactionStickerStoryCardReactMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),story_card_reaction_sticker_id:a,count:e}},onCompleted:function(a){j("reaction_sticker_react",null,null,f,g);return b(a)},onError:function(a){i("Error sending message",a),j("reaction_sticker_react",a,null,f,g),h(a)}})})},s=function(a){return new(b("Promise"))(function(b,e){d("RelayModern").commitMutation(c("RelayFBEnvironment"),{mutation:c("FBStoriesUnifiedSeenReceiptLastSeenTimeMutation"),variables:{input:{client_mutation_id:c("uuidv4")(),actor_id:c("CurrentUser").getID(),story_id:a}},onCompleted:function(a,c){return c!=null&&c.length>0?e(c[0]):b(a)},onError:function(a){e(a)}})})};g.deleteThread=e;g.deleteArchivedStoryCard=f;g.muteStoryOwner=k;g.unmuteStoryOwner=l;g.sendMessage=m;g.sendLightweightReaction=n;g.markThreadSeen=o;g.changeAudienceMode=p;g.updateArchiveSavingMode=q;g.updatePollVotesForOption=a;g.reactToSticker=r;g.updateStorySeenReciept=s}),98);
__d("MStoriesViewerAnchor",["CSS","MStoriesGating","MStoriesMutationAPIs","MStoriesStratcomEvents","Run","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.init=function(b){var c=a.getInstance();c.$2=!1;c.$3=b.storyID;c.$4=document.getElementById("m-stories-viewer-anchor");this.$1=c};a.getInstance=function(){this.$1||(this.$1=new a());return this.$1};function a(){var b=this;this.$2=!1;this.$3=null;this.$4=null;this.$7=function(){b.$5.forEach(function(a){return a.remove()}),b.$5=[],a.$1=null,a.loading=!1};this.$5=[c("Stratcom").listen("click","m-stories-viewer-seen-summary-anchor",function(b){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null);c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE,null);if(d("MStoriesGating").shouldShowNTViewerSheet()){if(a.loading)return;c("Stratcom").invoke(d("MStoriesStratcomEvents").CLICK_STORY_IN_VIEWER_SHEET)}}),c("Stratcom").listen(d("MStoriesStratcomEvents").VIEWER_SHEET_HIDE,null,function(a){b.$6(a)}),c("Stratcom").listen(d("MStoriesStratcomEvents").VIEWER_SHEET_OPEN,null,function(){b.$4&&b.$4.click()})];d("Run").onLeave(this.$7)}var b=a.prototype;b.$6=function(a){this.$2||(this.$2=!0,this.$3!=null&&d("MStoriesMutationAPIs").updateStorySeenReciept(this.$3),this.$4&&c("CSS").removeClass(this.$4,"highlighted"))};return a}();a.$1=null;a.loading=!1;g["default"]=a}),98);
__d("MStoriesDisplayUtils",["cx","CSS","DOM","MStoriesViewerAnchor"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b){b||(b=document.getElementsByClassName("_129-")[0]),b&&(a?d("DOM").show(b):d("DOM").hide(b)),i(a)}function i(a){var b=document.getElementById("kaios_tray");b&&(a?d("DOM").show(b):d("DOM").hide(b))}function b(a,b){var d=document.getElementById("m-stories-viewer-thread-loading-spinner");d&&(a?(c("MStoriesViewerAnchor").loading=!0,c("CSS").removeClass(d,"hidden_elem"),b&&c("CSS").addClass(d,"full_loading_screen")):(c("MStoriesViewerAnchor").loading=!1,c("CSS").addClass(d,"hidden_elem"),b&&c("CSS").removeClass(d,"full_loading_screen")))}g.toggleChromeBar=a;g.toggleSoftKeyTray=i;g.toggleLoadingScreen=b}),98);
__d("MStoriesOptimisticInfo",["MFBStoriesGatingConfig","MStoriesUploadStatus","Style","uniqueID"],(function(a,b,c,d,e,f){"use strict";var g="30vw",h="40vw",i="86px",j="128px",k="o-",l={_previews:[],addUpload:function(a,c,d,e){a={canvas:a,creationTime:c,mediaType:d,mediaID:null,postType:e,seen:!1,status:b("MStoriesUploadStatus").UPLOADING,threadID:k+b("uniqueID")()};l._previews.push(a);return a},nonCompletedUploadCount:function(){return l._getNonCompletedUploads().length},getThreadIDs:function(a){return l._getNonCompletedUploads().filter(function(b){return b.mediaID==null||a==null||!a.includes(b.mediaID)}).map(function(a){return a.threadID})},isOptimisticThreadID:function(a){return a!=null&&a.startsWith(k)},removeCompletedUploads:function(){l._previews=l._getNonCompletedUploads()},_getNonCompletedUploads:function(){return l._previews.filter(function(a){return a.status!==b("MStoriesUploadStatus").IDLE})},getFirstUnseenUpload:function(){return l._getNonCompletedUploads().find(function(a){return!a.seen})},getFirstUpload:function(){var a=l._getNonCompletedUploads();return a.length>0?a[0]:null},getNextOptimisticUploadToViewInBucket:function(a){var b,c=l.getFirstUnseenUpload();c?b=c:a!=null&&(b=l.getUploadForThreadID(a));c=b?l.getIndexOfUpload(b):0;return{index:c,upload:b}},getIndexOfUpload:function(a){return l._getNonCompletedUploads().indexOf(a)},getUploadForThreadID:function(a){return l._previews.find(function(b){return b.threadID===a})},getCanvasForTray:function(a){b("Style").set(a.canvas,"object-fit","cover");b("MFBStoriesGatingConfig").trayType==="mobile_three_by_one"?(b("Style").set(a.canvas,"width",g),b("Style").set(a.canvas,"height",h)):(b("Style").set(a.canvas,"width",i),b("Style").set(a.canvas,"height",j));return a.canvas},getCanvasForViewer:function(a){b("Style").set(a.canvas,"width","100%");b("Style").set(a.canvas,"height","auto");return a.canvas},removeUpload:function(a){l._previews=l._previews.filter(function(b){return b.threadID!==a})},getMediaIDs:function(){return l._getNonCompletedUploads().map(function(a){return a.mediaID}).filter(function(a){return!!a})},markUploadSeen:function(a){a.seen=!0},unseenUploadCount:function(){return l._getNonCompletedUploads().filter(function(a){return!a.seen}).length}};e.exports=l}),null);
__d("MStoriesTrackableElements",["Stratcom","Style"],(function(a,b,c,d,e,f){"use strict";var g={_elements:[],init:function(a){g._elements=a.elements},hideElementsAndInvokeLogging:function(){g._elements.map(function(a){return b("Style").set(a,"margin-top","-100px")}),b("Stratcom").invoke("m:stories:card-hidden",null,null)}};e.exports=g}),null);
__d("MStoriesViewerSheetThreadRelatedInfo",[],(function(a,b,c,d,e,f){"use strict";var g={_currentThreadIndex:0,_currentNTIndex:-1,_maxThread:Number.MAX_VALUE,_deletedThreadIDs:[],setCurrentThreadIndex:function(a){g._currentThreadIndex=Math.min(a.currentThreadIndex,g._maxThread)},getCurrentThreadIndex:function(){return g._currentThreadIndex},setMaxThreadIndex:function(a){g._maxThread=a},getMaxThreadIndex:function(){return g._maxThread},addDeletedThreadIDs:function(a){g._deletedThreadIDs.push(a)},removeDeletedThreadIDs:function(a){g._deletedThreadIDs=g._deletedThreadIDs.filter(function(b){return b!==a})},getDeleteThreadIDs:function(){return g._deletedThreadIDs},getCurrentNTIndex:function(){return g._currentNTIndex},setCurrentNTIndex:function(a){g._currentNTIndex=a}};e.exports=g}),null);
__d("StoryNavigationGesture",["CloseStoryGesture"],(function(a,b,c,d,e,f,g){"use strict";a=Object.freeze({TAP_FORWARD:"tap_forward",TAP_BACKWARD:"tap_backward",AUTO_JUMP:"auto_jump",SWIPE_RIGHT:"swipe_right",SWIPE_LEFT:"swipe_left",getCloseStoryGestureFromStoryNavigation:function(a,b){if(!a)return"nil";switch(a){case this.TAP_BACKWARD:return b?c("CloseStoryGesture").CLICK_EXIT:c("CloseStoryGesture").CLICK_LEFT;case this.TAP_FORWARD:return b?c("CloseStoryGesture").CLICK_EXIT:c("CloseStoryGesture").CLICK_RIGHT;case this.AUTO_JUMP:return b?c("CloseStoryGesture").AUTO_EXIT:c("CloseStoryGesture").AUTO_JUMP;case this.SWIPE_LEFT:return b?c("CloseStoryGesture").SWIPE_EXIT:c("CloseStoryGesture").SWIPE_LEFT;case this.SWIPE_RIGHT:return b?c("CloseStoryGesture").SWIPE_EXIT:c("CloseStoryGesture").SWIPE_RIGHT;default:return"nil"}}});g["default"]=a}),98);
__d("XFBStoriesArchiveViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/archive/viewer/",{card_id:{type:"FBID",required:!0},should_expand_viewer_sheet:{type:"Bool",defaultValue:!1},source:{type:"String"}})}),null);
__d("XMStoriesArchiveAsyncViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/archive/viewer/{card_id}/",{card_id:{type:"FBID",required:!0},card_index:{type:"Int",required:!0},card_count:{type:"Int"}})}),null);
__d("XMStoriesAsyncThreadViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/card/{bucket_id}/{thread_id}/",{bucket_id:{type:"FBID",required:!0},bucket_index:{type:"Int",required:!0},prev_thread_id:{type:"FBID"},prev_thread_index:{type:"Int"},source:{type:"String"},story_viewer_type:{type:"Enum",defaultValue:"default",enumType:1},thread_id:{type:"FBID",required:!0},thread_index:{type:"Int",required:!0},thread_count:{type:"Int"},tray_session_id:{type:"String"},viewer_session_id:{type:"String"},optimistically_deleted_thread_ids:{type:"FBIDVector"},tracking_string:{type:"String"}})}),null);
__d("XMStoriesOptimisticUploadTrayViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/view_tray_upload/{selected_bucket_id}/",{optimistic_creation_time:{type:"Int",required:!0},optimistic_media_id:{type:"FBID"},optimistic_media_ids:{type:"FBIDVector"},optimistic_media_type:{type:"Enum",required:!0,enumType:1},optimistic_thread_index:{type:"Int",required:!0},optimistic_thread_id:{type:"String",required:!0},source:{type:"String"},selected_bucket_id:{type:"FBID",required:!0},selected_bucket_index:{type:"Int"},tray_session_id:{type:"String"},has_bucket_ids:{type:"Bool",defaultValue:!1},upload_count:{type:"Int",required:!0}})}),null);
__d("XMStoriesTrayPaginationViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/view_tray_pagination/{selected_bucket_id}/",{privacy_mutation_token:{type:"String"},end_cursor:{type:"String"},has_bucket_ids:{type:"Bool",defaultValue:!1},has_next_page:{type:"Bool",defaultValue:!1},selected_bucket_id:{type:"FBID",required:!0},selected_bucket_index:{type:"Int"},thread_id:{type:"FBID"},tray_session_id:{type:"String"},source:{type:"String"},unseen:{type:"Bool",defaultValue:!1},feed_unit_id:{type:"String"},feed_unit_tracking_string:{type:"String"},should_expand_viewer_sheet:{type:"Bool",defaultValue:!1},tracking_string:{type:"String"}})}),null);
__d("XMStoriesTrayViewerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/view_tray/{selected_bucket_id}/",{optimistic_media_ids:{type:"FBIDVector"},selected_bucket_id:{type:"FBID",required:!0},selected_bucket_index:{type:"Int"},thread_id:{type:"FBID"},tray_session_id:{type:"String"},viewer_session_id:{type:"String"},has_bucket_ids:{type:"Bool",defaultValue:!1},source:{type:"String"},unseen:{type:"Bool",defaultValue:!1},upload_count:{type:"Int"},feed_unit_id:{type:"String"},feed_unit_tracking_string:{type:"String"},should_expand_viewer_sheet:{type:"Bool",defaultValue:!1},tracking_string:{type:"String"}})}),null);
__d("MStoriesBucketViewer",["cx","Bootloader","CSS","CurrentUser","MHistory","MStoriesDisplayUtils","MStoriesGating","MStoriesLoggingUtils","MStoriesOptimisticInfo","MStoriesSessionInfo","MStoriesStratcomEvents","MStoriesTrackableElements","MStoriesTrayInfo","MStoriesUploadStatus","MStoriesViewerSheetThreadRelatedInfo","QuickPerformanceLogger","Run","StoryNavigationGesture","Stratcom","ThisControllerNoLongerExists","URI","XAsyncRequest","XFBStoriesArchiveViewerController","XMStoriesArchiveAsyncViewerController","XMStoriesAsyncThreadViewerController","XMStoriesOptimisticUploadTrayViewerController","XMStoriesTrayPaginationViewerController","XMStoriesTrayViewerController","gkx","goURI","qpl"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(){var a=this;this.$9=[];this.$12=null;this.$13="default";this.$21=function(b){var e=new(c("URI"))(b.getData().path);e=e.getPath();if(e.startsWith("/stories/view_tray")||e.startsWith("/stories/archive/viewer")||e.startsWith("/direct")){b.prevent();return}d("MStoriesTrackableElements").hideElementsAndInvokeLogging();c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE);e.startsWith("/stories/settings")||e.startsWith("/stories/preview")||e.startsWith("/archive/")?a.$12=null:!a.$12&&!c("gkx")("709647")&&(b.prevent(),c("goURI")(e))};this.$24=function(){if(!d("MStoriesGating").shouldShowNTViewerSheet())return;a.$14=!0;a.$28(!0)};this.$19=function(){a.$8.splice(a.$7,1),d("MStoriesViewerSheetThreadRelatedInfo").setMaxThreadIndex(a.$8.length-1),a.$7<a.$8.length?(a.$7--,a.$18(c("StoryNavigationGesture").AUTO_JUMP)):a.$8.length===0?a.$20(!1):(a.$7--,a.$29(),c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_BUCKET,null,{gesture:c("StoryNavigationGesture").AUTO_JUMP}))};this.$23=function(){if(!d("MStoriesGating").shouldShowNTViewerSheet())return;a.$14=!1;var b=d("MStoriesViewerSheetThreadRelatedInfo").getCurrentThreadIndex();if(b===a.$7){a.$28(!0);return}c("Stratcom").invoke(d("MStoriesStratcomEvents").CARD_CHANGED_BY_VIEWER_SHEET);a.$32(b)};this.$12=document.getElementsByClassName("_129-")[0];d("MStoriesDisplayUtils").toggleChromeBar(!1,this.$12);this.$9=[c("Stratcom").listen("click","m-stories-prev-button",function(){a.$17(c("StoryNavigationGesture").TAP_BACKWARD)}),c("Stratcom").listen("click","m-stories-next-button",function(){a.$18(c("StoryNavigationGesture").TAP_FORWARD)}),c("Stratcom").listen(d("MStoriesStratcomEvents").NEXT_CARD,null,function(){a.$18(c("StoryNavigationGesture").AUTO_JUMP)}),c("Stratcom").listen(d("MStoriesStratcomEvents").DELETE_THREAD,null,this.$19),c("Stratcom").listen("click","m-stories-empty-bucket-confirm",function(){a.$20(!1)}),c("Stratcom").listen("click","m-stories-empty-bucket-confirm-backwards",function(){a.$20(!0)}),c("Stratcom").listen("m:history:change",null,this.$21),c("Stratcom").listen(d("MStoriesStratcomEvents").UPLOAD_SUCCESS,null,function(b){b=b.getData()||{};a.$22(b.newThreadID,b.optimisticThreadID)}),c("Stratcom").listen(d("MStoriesStratcomEvents").VIEWER_SHEET_HIDDEN,null,this.$23),c("Stratcom").listen(d("MStoriesStratcomEvents").CLICK_STORY_IN_VIEWER_SHEET,null,this.$24)];this.$10={};this.$11={};d("Run").onLeave(function(){a.$25()})}a.getInstance=function(){this.$16||(this.$16=new a());return this.$16};a.isArchiveStoryViewer=function(){return a.getInstance().$13==="archive"};a.init=function(b){var c=b.bucketID,d=b.startingThreadIndex,e=b.threadIDs,f=b.bucketIndex,g=b.mediaType,h=b.ownerID,i=b.ownerType,j=b.storyViewerType,k=b.navigationRoot,l=b.serverThreadMediaIDs;b=b.shouldShowViewerSheet;a.getInstance().$26(c,f,d,e,g,h,i,j,k,l,b)};var b=a.prototype;b.$26=function(a,b,e,f,g,h,i,j,k,l,m){this.$1=a,this.$2=b,this.$8=f,this.$7=e,this.$4=g,this.$5=h,this.$6=i,j&&(this.$13=j),d("MStoriesGating").shouldShowNTViewerSheet()&&(this.$14=m,d("MStoriesViewerSheetThreadRelatedInfo").setMaxThreadIndex(this.$8.length-1)),this.$15=k,d("MStoriesGating").shouldShowOptimisticPreviews()&&this.$5===c("CurrentUser").getID()&&(this.$8=this.$8.concat(d("MStoriesOptimisticInfo").getThreadIDs(l))),this.$27(),this.$7<this.$8.length&&this.$28(!1),this.$3&&(this.$3.abort(),this.$3=null),this.$29(),d("MStoriesTrayInfo").setTrayNeedsRefresh(!0)};b.$27=function(){var a=this.$15;if(a==null)return;c("CSS").removeClass(a,"prevDisabled");c("CSS").removeClass(a,"nextDisabled");var b=c("gkx")("709647");if(b)return;this.$13==="archive"?(this.$7===0&&c("CSS").addClass(a,"prevDisabled"),this.$7===this.$8.length-1&&c("CSS").addClass(a,"nextDisabled")):this.$2===0&&this.$7===0&&c("CSS").addClass(a,"prevDisabled")};b.$28=function(a){var b=d("MStoriesSessionInfo").getTraySessionID(),e=-1;a?e=d("MStoriesViewerSheetThreadRelatedInfo").getCurrentThreadIndex():e=this.$7;e===this.$8.length-1&&this.$30();if(this.$13==="archive"){a=c("XFBStoriesArchiveViewerController").getURIBuilder().setFBID("card_id",this.$8[e]).setBool("should_expand_viewer_sheet",this.$14).getURI();c("MHistory").replaceState(a);return}if(b){a=this.$8[e];var f;if(d("MStoriesOptimisticInfo").isOptimisticThreadID(a)){a=d("MStoriesOptimisticInfo").getUploadForThreadID(a);a&&a.status===c("MStoriesUploadStatus").UPLOADING&&(f=c("XMStoriesOptimisticUploadTrayViewerController").getURIBuilder().setFBID("selected_bucket_id",this.$1).setString("tray_session_id",b).setFBID("optimistic_media_id",a.mediaID).setEnum("optimistic_media_type",a.mediaType).setInt("optimistic_creation_time",a.creationTime).setInt("optimistic_thread_index",this.$7).setString("optimistic_thread_id",a.threadID).setInt("upload_count",d("MStoriesOptimisticInfo").nonCompletedUploadCount()).setFBIDVector("optimistic_media_ids",d("MStoriesOptimisticInfo").getMediaIDs()).getURI())}else{a=new(c("URI"))(c("MHistory").getPath());var g=a.getQueryData(),h=a.getPath();h.startsWith("/direct")?(g.bucket_id=this.$1,a.setQueryData(g),a.setPath("/direct/"+this.$8[e]),f=a):h.startsWith("/stories/view_tray_pagination")?f=c("XMStoriesTrayPaginationViewerController").getURIBuilder().setFBID("selected_bucket_id",this.$1).setString("tray_session_id",b).setFBID("thread_id",this.$8[e]).setString("feed_unit_tracking_string",d("MStoriesSessionInfo").getFeedUnitTrackingString()).setBool("should_expand_viewer_sheet",this.$14).setString("end_cursor",g.end_cursor).setBool("has_next_page",g.has_next_page==="1").getURI():f=c("XMStoriesTrayViewerController").getURIBuilder().setFBID("selected_bucket_id",this.$1).setString("tray_session_id",b).setFBID("thread_id",this.$8[e]).setString("feed_unit_tracking_string",d("MStoriesSessionInfo").getFeedUnitTrackingString()).setBool("should_expand_viewer_sheet",this.$14).getURI()}c("MHistory").replaceState(f)}};b.$29=function(){var a=this.$8[this.$7];if(d("MStoriesOptimisticInfo").isOptimisticThreadID(a)){this.$11[this.$1]=a;var b=d("MStoriesOptimisticInfo").getUploadForThreadID(a);b&&d("MStoriesOptimisticInfo").markUploadSeen(b)}else this.$10[this.$1]=a};b.$20=function(a){delete this.$10[this.$1],c("Stratcom").invoke(d("MStoriesStratcomEvents").DELETE_BUCKET,null,{backwards:a})};b.$17=function(a){if(this.$3)return;this.$7>0?(d("MStoriesOptimisticInfo").isOptimisticThreadID(this.$8[this.$7])||d("MStoriesLoggingUtils").logStoryNavigation(this.getInsightsLoggingData(),a),this.$31(!1)):c("Stratcom").invoke(d("MStoriesStratcomEvents").PREV_BUCKET,null,{gesture:a})};b.$18=function(a){if(this.$3)return;this.$7<this.$8.length-1?(a&&d("MStoriesLoggingUtils").logStoryNavigation(this.getInsightsLoggingData(),a),this.$31(!0)):c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_BUCKET,null,{gesture:a})};b.$32=function(a){var b=this;c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),4);c("QuickPerformanceLogger").markerStart(c("qpl")._(13238356,"3510"));var e=this.$7;this.$7=a;d("MStoriesTrackableElements").hideElementsAndInvokeLogging();d("MStoriesDisplayUtils").toggleLoadingScreen(!0);var f=this.$8[this.$7];a="";if(this.$13==="archive")a=c("XMStoriesArchiveAsyncViewerController").getURIBuilder().setFBID("card_id",this.$8[this.$7]).setInt("card_index",this.$7).setInt("card_count",this.$8.length).getURI();else if(d("MStoriesOptimisticInfo").isOptimisticThreadID(f)){var g=d("MStoriesOptimisticInfo").getUploadForThreadID(f);g&&(a=d("ThisControllerNoLongerExists").__DEADURI__("teaw8atck"),this.$11[this.$1]=g.threadID,d("MStoriesOptimisticInfo").markUploadSeen(g))}else{g=c("XMStoriesAsyncThreadViewerController").getURIBuilder().setFBID("bucket_id",this.$1).setInt("bucket_index",this.$2).setString("source",d("MStoriesSessionInfo").getSource()).setEnum("story_viewer_type",this.$13).setFBID("thread_id",this.$8[this.$7]).setInt("thread_index",this.$7).setInt("thread_count",this.$8.length).setString("tray_session_id",d("MStoriesSessionInfo").getTraySessionID()).setString("viewer_session_id",d("MStoriesSessionInfo").getViewerSessionID()).setInt("prev_thread_index",e).setFBIDVector("optimistically_deleted_thread_ids",d("MStoriesViewerSheetThreadRelatedInfo").getDeleteThreadIDs()).setString("tracking_string",d("MStoriesTrayInfo").getTrayTrackingStrings(d("MStoriesSessionInfo").getFeedUnitID())[this.$2]);e=this.$8[e];d("MStoriesOptimisticInfo").isOptimisticThreadID(e)||g.setFBID("prev_thread_id",e);a=g.getURI();this.$10[this.$1]=f}this.$3=new(c("XAsyncRequest"))(a).setHandler(function(a){var e;e=(e=a)!=null?(e=e.payload)!=null?e.prevBucket:e:e;a=(a=a)!=null?(a=a.payload)!=null?a.nextBucket:a:a;e?(c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),4),c("Stratcom").invoke(d("MStoriesStratcomEvents").PREV_BUCKET,null,null)):a?(c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),4),c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_BUCKET,null,null)):(c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(a){a.markThreadSeen(f)},"MStoriesBucketViewer"),b.$27(),b.$28(!1));b.$33()}).setErrorHandler(function(){c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),3),b.$33()});this.$3.send()};b.$31=function(a){a=a?this.$7+1:this.$7-1;this.$32(a)};b.getLastSeenThreadIdForBucketId=function(a){return this.$10[a]};b.getLastSeenOptimisticThreadIdForBucketId=function(a){return this.$11[a]};b.getInsightsLoggingData=function(){var a=d("MStoriesGating").shouldMockLogging()?(this.$2*1e3+this.$8.length*100+this.$7).toString():this.$8[this.$7];return{number_of_media:this.$8.length,media_index:this.$7,media_type:this.$4,owner_id:this.$5,owner_type:this.$6,thread_id:a}};b.$22=function(a,b){for(var c=0;c<this.$8.length;c++){var d=this.$8[c];if(d===b){this.$8[c]=a;break}}};b.$25=function(){c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),4),this.$12&&(d("MStoriesDisplayUtils").toggleChromeBar(!0,this.$12),this.$12=null),this.$9.forEach(function(a){return a.remove()}),a.$16=null};b.$33=function(){c("Stratcom").invoke("m:stories:card-loaded",null,null),d("MStoriesDisplayUtils").toggleLoadingScreen(!1),this.$3=null};b.$30=function(){c("Stratcom").invoke("m:feed:story:all-stories-viewed",null,{ownerID:this.$5})};return a}();g["default"]=a}),98);
__d("MStoriesProgressbarSegment",["Run"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){a.getInstance=function(){a.$2||(a.$2=new a());return a.$2};function a(){this.$1=null,this.$3=function(){a.$2=null},this.$3=this.$3.bind(this),d("Run").onLeave(this.$3)}var b=a.prototype;b.update=function(a){if(!this.$1)return!1;this.$1.style.width=a+"%";return!0};b.init=function(a){this.$1=a};return a}();function a(a){h.getInstance().init(a.progressBarSegment)}function b(a){return h.getInstance().update(a)}g.init=a;g.updateProgressbarSegment=b}),98);
__d("MStoriesCardPhoto",["MStoriesProgressbarSegment","MStoriesStratcomEvents","MStoriesUIConstants","MStoriesUtils","Run","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.getInstance=function(){this.$5||(this.$5=new a());return this.$5};function a(){var b=this;this.$1=0;this.$3=null;this.$4=!1;this.$10=function(){b.$1+=d("MStoriesUIConstants").PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC;var a=b.$1*100/d("MStoriesUIConstants").PROGRESS_BAR.DEFAULT_TIMER_DURATION_IN_SEC;a=Math.min(a,100);var e=d("MStoriesProgressbarSegment").updateProgressbarSegment(a);(!e||a===100)&&(b.$6(),c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_CARD))};this.$6=function(){b.$13(),b.$4=!1,b.$1=0};this.$7=function(){b.$6(),a.$5=null};this.$6=this.$6.bind(this);d("Run").onLeave(this.$7)}a.init=function(b){a.getInstance().setup(b)};var b=a.prototype;b.setup=function(a){this.$6(),this.$4=!0,this.$8(),a||this.$9()};b.$8=function(){var a=this;this.$2=[c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PAUSE,null,function(){a.$11()}),c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PLAY,null,function(){a.$12()})];this.$2=this.$2.concat(d("MStoriesUtils").listenForThreadTransition(this.$6))};b.$11=function(){if(!this.$4||!this.$3)return;this.$13()};b.$12=function(){if(!this.$4||this.$3)return;this.$9()};b.$9=function(){if(this.$3)return;this.$3=setInterval(this.$10,d("MStoriesUIConstants").PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC*d("MStoriesUIConstants").SEC_TO_MS)};b.$13=function(){this.$3&&(clearInterval(this.$3),this.$3=null)};return a}();a.$5=null;g["default"]=a}),98);
__d("MStoriesCardReactionsSent",["DOM","MStoriesStratcomEvents","Run","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.init=function(a){var b=this.getInstance();b.$8(a)};a.getInstance=function(){this.$7||(this.$7=new a());return this.$7};function a(){var b=this;this.$1=[];this.$2={};this.$6=c("Stratcom").listen(d("MStoriesStratcomEvents").LIGHTWEIGHT_REPLY,null,function(a){return b.$9(a)});d("Run").onLeave(function(){b.$6.remove(),a.$7=null})}var b=a.prototype;b.$8=function(a){var b=a.reactions,c=a.reaction_elements,e=a.name_element;a=a.footer_root_element;this.$1=b;this.$2=c;this.$3=e;b=d("DOM").scry(a,"div");c=b[0];e=b[1];this.$4=c;this.$5=e};b.$9=function(a){a=(a=a.getData().originalTarget)!=null?a.firstChild:a;if(!(a instanceof HTMLElement))return;a=a.dataset.reaction;if(a==null)return;this.$1=this.$1.concat(Number(a)).slice(-5);this.$10()};b.$10=function(){var a=this;this.$4&&d("DOM").empty(this.$4);this.$1.map(function(b){d("DOM").appendContent(a.$4,a.$2[b].cloneNode(!0))});this.$3!=null&&this.$5!=null&&!this.$5.hasChildNodes()&&d("DOM").appendContent(this.$5,this.$3)};return a}();g["default"]=a}),98);
__d("MStoriesCardVideo",["MInlineVideo","MStoriesDOMUtils","MStoriesProgressbarSegment","MStoriesStratcomEvents","MStoriesUIConstants","MStoriesUtils","MVideoUtils","Run","Stratcom","Style"],(function(a,b,c,d,e,f,g){"use strict";var h="m-video-play-button";a=function(){function a(){var b=this;this.$1=0;this.$2=[];this.$3=!1;this.$4=null;this.$5=!0;this.$6=null;this.$7=null;this.$13=function(){var a=!b.$5&&b.$6?b.$6:d("MStoriesUIConstants").PROGRESS_BAR.DEFAULT_TIMER_DURATION_IN_SEC*d("MStoriesUIConstants").SEC_TO_MS;b.$1+=d("MStoriesUIConstants").PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC;a=b.$1*100*d("MStoriesUIConstants").SEC_TO_MS/a;a=Math.min(a,100);var e=d("MStoriesProgressbarSegment").updateProgressbarSegment(a);(!e||a===100)&&(b.$9(),c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_CARD))};this.$9=function(){b.$15(),b.$14(),b.$2.forEach(function(a){return a.remove()}),b.$2=[],b.$3=!1,b.$6=0,b.$5=!0,b.$1=0};this.$10=function(){b.$9(),a.$8=null};this.$9=this.$9.bind(this);d("Run").onLeave(this.$10)}a.getInstance=function(){this.$8||(this.$8=new a());return this.$8};a.init=function(b){a.getInstance().setup(b.videoDuration,b.shouldPauseMedia,b.videoElem)};var b=a.prototype;b.setup=function(a,b,c){this.$9(),this.$6=a,this.$5=!0,this.$3=!0,this.$7=d("MStoriesDOMUtils").find(c,"div",h),this.$11(),b||this.$12()};b.$11=function(){var a=this;this.$2=[c("Stratcom").listen(d("MStoriesStratcomEvents").VIDEO_PLAYING,null,function(){c("Stratcom").removeCurrentListener(),a.$14(),a.$1=0,a.$5=!1,a.$12()}),c("Stratcom").listen(d("MStoriesStratcomEvents").VIDEO_PLAY,null,function(){a.$5&&(a.$14(),a.$1=0)}),c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PAUSE,null,function(){a.$15()}),c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PLAY,null,function(){a.$16()}),c("Stratcom").listen(d("MStoriesStratcomEvents").TOAST_HIDING,null,function(){a.$5&&a.$7&&c("Style").set(a.$7,"display","block")}),c("Stratcom").listen(d("MStoriesStratcomEvents").TOAST_SHOWING,null,function(){a.$5&&a.$7&&c("Style").set(a.$7,"display","none")})];this.$2=this.$2.concat(d("MStoriesUtils").listenForThreadTransition(function(){d("MInlineVideo").removePlayer(),a.$9()}))};b.$15=function(){if(!this.$3||!this.$4)return;this.$14();d("MInlineVideo").getPlayerState()===c("MVideoUtils").PLAYER_STATE.playing&&d("MInlineVideo").pause("user_initiated")};b.$16=function(){if(!this.$3||this.$4)return;this.$12();this.$5||d("MInlineVideo").play("user_initiated")};b.$12=function(){if(this.$4)return;this.$4=window.setInterval(this.$13,d("MStoriesUIConstants").PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC*d("MStoriesUIConstants").SEC_TO_MS)};b.$14=function(){this.$4&&(window.clearInterval(this.$4),this.$4=null)};return a}();a.$8=null;g["default"]=a}),98);
__d("DeleteMediaAttemptedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743549");b=d("FalcoLoggerInternal").create("delete_media_attempted",a);e=b;g["default"]=e}),98);
__d("MStoriesOptionConfirmationButtons",["cx","fbt","Bootloader","CSS","CloseStoryGesture","DeleteMediaAttemptedFalcoEvent","FBLogger","FBStoriesLoggingConstants","MStoriesBucketViewer","MStoriesDisplayUtils","MStoriesGating","MStoriesLoggingUtils","MStoriesStratcomEvents","MStoriesToast","MStoriesUIConstants","MStoriesUtils","MStoriesViewerSheetThreadRelatedInfo","Run","Stratcom","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=2e3;a=function(){function a(){var b=this;this.$6=!1;this.$7=null;this.$8=null;this.$14=function(){b.$1.forEach(function(a){return a.remove()}),a.$9=null};this.$1=[c("Stratcom").listen("click","m-stories-mute-confirm",function(a){b.$10(),c("Stratcom").invoke(d("MStoriesStratcomEvents").MUTE_BUCKET,null),c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null),b.$4&&c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(a){a.muteStoryOwner(b.$4)},"MStoriesOptionConfirmationButtons")}),c("Stratcom").listen("click","m-stories-mute-cancel",function(a){b.$10(),c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null)}),c("Stratcom").listen("click","m-stories-delete-confirm",function(a){b.$11(d("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA);b.$12();c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null);c("MStoriesToast").showDefaultToast(i._("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"),j);c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE,null);var e=b.$5;d("MStoriesViewerSheetThreadRelatedInfo").addDeletedThreadIDs(e);var f=function(){d("MStoriesViewerSheetThreadRelatedInfo").removeDeletedThreadIDs(e)};c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(a){c("MStoriesBucketViewer").isArchiveStoryViewer()?c("promiseDone")(a.deleteArchivedStoryCard(b.$8),f,f):c("promiseDone")(a.deleteThread(e),f,f),c("Stratcom").invoke(d("MStoriesStratcomEvents").DELETE_THREAD,null,null)},"MStoriesOptionConfirmationButtons")}),c("Stratcom").listen("click","m-stories-delete-cancel",function(a){b.$12(),c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null)}),c("Stratcom").listen("click","m-stories-close-story-button",function(a){if(b.$6)return;b.$6=!0;a=a.getData()||{};d("MStoriesLoggingUtils").logCloseStory(d("MStoriesGating").shouldMockLogging?c("MStoriesBucketViewer").getInstance().getInsightsLoggingData():{thread_id:b.$5,media_type:b.$3,owner_id:b.$4,owner_type:null},(a=c("CloseStoryGesture").fromString(a.gesture))!=null?a:c("CloseStoryGesture").CLOSE_BUTTON_EXIT,{media_id:b.$2});c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE,null,null);d("MStoriesDisplayUtils").toggleLoadingScreen(!0,!0);window.setTimeout(function(){d("MStoriesUtils").goBackToHomepage(b.$7==="HIGHLIGHTED_STORY")},d("MStoriesUIConstants").REDIRECT_DELAY_IN_MS)}),c("Stratcom").listen("click","m-stories-option-close",function(){b.$13(),c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null)}),c("Stratcom").listen(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null,function(){b.$12(),b.$10()})];d("Run").onLeave(this.$14)}a.getInstance=function(){this.$9||(this.$9=new a());return this.$9};var b=a.prototype;b.$10=function(){var a=document.getElementById("m-stories-mute-bucket-confirm-dialog");a&&c("CSS").addClass(a,"_69p_")};b.$13=function(){var a=document.getElementById("mtouch-story-option-menu");a&&c("CSS").addClass(a,"_68j_")};b.$11=function(a,b){var e=this;b===void 0&&(b=null);a===d("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA?(this.$4==null&&c("FBLogger")("fbstories").mustfix("Expecting non-null _storyOwnerID"),c("DeleteMediaAttemptedFalcoEvent").log(function(){var a;return{media_id:e.$2,media_type:e.$3,story_owner:(a=e.$4)!=null?a:"",thread_id:e.$5}})):c("Bootloader").loadModules(["MStoriesTypedLogger"],function(c){new c().setName(a).setStoryOwner(e.$4).setMediaType(e.$3).setClientMediaID(e.$2).setCardID(e.$5).setGesture(b).log()},"MStoriesOptionConfirmationButtons")};b.$12=function(){var a=document.getElementById("m-stories-delete-thread-confirm-dialog");a&&c("CSS").addClass(a,"_69p_")};a.initMuteConfirmationButtons=function(b){var c=a.getInstance();c.$4=b.storyOwnerID};a.init=function(b){var c=a.getInstance();c.$5=b.threadID;c.$4=b.storyOwnerID;c.$2=b.mediaID;c.$3=b.mediaType;c.$8=b.storyGraphQLID;c.$7=b.storyCardType;c.$6=!1};return a}();g["default"]=a}),98);
__d("XMStoriesSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/settings/",{})}),null);
__d("MStoriesOptionMenu",["cx","CSS","MPageController","MStoriesDisplayUtils","MStoriesHideHeaderListener","MStoriesStratcomEvents","Run","Stratcom","XMStoriesSettingsController"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(){var b=this;this.$8=function(){b.$1.forEach(function(a){return a.remove()}),a.$5=null};this.$1=[c("Stratcom").listen("click","m-stories-options",function(a){a=b.$6();if(!a)return;var e="_68j_";if(c("CSS").hasClass(a,e)){c("CSS").removeClass(a,e);c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null,null);a=a==null?void 0:(e=a.children)==null?void 0:e[0];a!=null&&(a.tabIndex=a.tabIndex,a.focus())}}),c("Stratcom").listen("click","m-stories-option-mute",function(a){b.$7();if(b.$2){c("CSS").removeClass(b.$2,"_69p_");a=document.getElementById("m-stories-mute-cancel");a!=null&&(a.tabIndex=a.tabIndex,a.focus())}}),c("Stratcom").listen("click","m-stories-option-delete",function(a){b.$7();if(b.$3){c("CSS").removeClass(b.$3,"_69p_");a=document.getElementById("m-stories-delete-cancel");a!=null&&(a.tabIndex=a.tabIndex,a.focus())}}),c("Stratcom").listen("click","m-stories-option-report",function(a){b.$7(),d("MStoriesHideHeaderListener").setup(),d("MPageController").load(b.$4)}),c("Stratcom").listen("click","m-stories-option-story-settings",function(a){a=c("XMStoriesSettingsController").getURIBuilder().getURI();b.$7();d("MStoriesDisplayUtils").toggleChromeBar(!1);d("MPageController").load(a,{hideLoadingIndicator:!0})}),c("Stratcom").listen(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null,function(){b.$7()})];d("Run").onLeave(this.$8)}var b=a.prototype;b.$6=function(){return document.getElementById("mtouch-story-option-menu")};b.$7=function(){var a=this.$6();a&&c("CSS").addClass(a,"_68j_")};a.getInstance=function(){this.$5||(this.$5=new a());return this.$5};a.initConfirmationDialogs=function(b){var c=b.optionDeleteConfirmationDialog;b=b.optionMuteConfirmationDialog;var d=a.getInstance();d.$3=c;d.$2=b};a.initReportURI=function(b){b=b.reportURI;var c=a.getInstance();c.$4=b};return a}();g["default"]=a}),98);
__d("MStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={LIGHT_WEIGHT:"light_weight",TEXT:"text"};f.REPLY_TYPES=a}),66);
__d("MStoriesPostReplyInstance",["cx","fbt","Bootloader","CSS","MFBStoriesGatingConfig","MFBStoriesReactionAnimationConfig","MStoriesLoggingConstants","MStoriesStratcomEvents","MStoriesToast","MStoriesUtils","MViewport","Run","Stratcom","promiseDone","throttle","uniqueID"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(a){switch(a){case 1:return"\ud83d\udc4d";case 2:return"\u2764\ufe0f";case 4:return"\ud83d\ude06";case 3:return"\ud83d\ude2e";case 7:return"\ud83d\ude22";case 8:return"\ud83d\ude21";case 16:return"\ud83e\udd17";default:return null}},k=(a={},a[1]="LIKE",a[2]="LOVE",a[4]="HAHA",a[3]="WOW",a[7]="SORRY",a[8]="ANGER",a[16]="SUPPORT",a),l=100;b=function(){a.init=function(b){var c=a.getInstance();c.$1=babelHelpers["extends"]({},b);this.$5=c};a.getInstance=function(){this.$5||(this.$5=new a());return this.$5};function a(){var b=this;this.$2=null;this.$4=!1;this.$6=function(){b.$3.forEach(function(a){return a.remove()}),b.$3=[],b.$4=!1,a.$5=null};this.$7=function(){b.$2&&b.$2.dispose(),b.$2=null};this.$3=[];this.listenForSendButton();this.listenForEmojiOrLightweightReaction();this.listenForReplyInput();this.listenForSwipeReply();this.listenForProfileDiv();this.listenForBucketTransition();this.listenForScrollableArea();d("Run").onLeave(this.$6)}var b=a.prototype;b.listenForBucketTransition=function(){this.$3.push(c("Stratcom").listen(d("MStoriesStratcomEvents").NEXT_BUCKET,null,this.$6),c("Stratcom").listen(d("MStoriesStratcomEvents").PREV_BUCKET,null,this.$6))};b.listenForScrollableArea=function(){this.$3.push(c("Stratcom").listen("MScrollArea:create",null,function(b){b=b.getData();b.element.id==="mtouch-stories-reply-scroll-area"&&(a.getInstance().$2=b.scrollarea)})),this.$3.concat(d("MStoriesUtils").listenForThreadTransition(this.$7))};b.listenForSendButton=function(){var a=this,b="",e=c("Stratcom").listen("input","m-stories-reply-input",function(d){b=d.getTarget().value,b=b&&b.trim(),b&&b.length>0?(a.$1.sendButton.disabled=!1,c("CSS").addClass(a.$1.sendButton,"highlight")):(a.$1.sendButton.disabled=!0,c("CSS").removeClass(a.$1.sendButton,"highlight"))}),f=c("Stratcom").listen("click","m-stories-reply-send-button",function(){if(!b||b.length===0)return;c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(e){c("promiseDone")(e.sendMessage(a.$1.threadId,b,a.$1.postType,a.$1.ownerID,d("MStoriesLoggingConstants").REPLY_TYPES.TEXT))},"MStoriesPostReplyInstance");a.$1.sendButton.disabled=!0;a.$1.input.blur();c("CSS").removeClass(a.$1.sendButton,"highlight");c("MStoriesToast").showReplySentSuccessToast(null,!1)}),g=c("Stratcom").listen("blur","m-stories-reply-input",function(){return c("CSS").addClass(a.$1.sendButton,"hidden_elem")}),h=c("Stratcom").listen("focus","m-stories-reply-input",function(){a.$8()||c("CSS").removeClass(a.$1.sendButton,"hidden_elem")});this.$3.push(f,e,g,h)};b.listenForEmojiOrLightweightReaction=function(){var a=this;this.$3.push(c("Stratcom").listen("blur","m-stories-reply-input",function(){return c("CSS").show(a.$1.emoji)}));this.$3.push(c("Stratcom").listen("focus","m-stories-reply-input",function(){a.$8()||c("CSS").hide(a.$1.emoji)}));this.$3.push(c("Stratcom").listen("MScrollArea:scrollstart",null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER)}));this.$3.push(c("Stratcom").listen("MScrollArea:scrollend",null,function(a){a=a.getData();a.scrollarea.getScrollLeft()<=0&&c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY)}));var b=function(b){var e;e=(e=b.getTarget())!=null?(e=e.firstChild)!=null?(e=e.dataset)!=null?e.reaction:e:e:e;if(!e)return;var f=j(Number(e));if(!f)return;if(a.$8())a.$9();else{c("Stratcom").invoke(d("MStoriesStratcomEvents").LIGHTWEIGHT_REPLY,null,{originalTarget:b.getTarget()});c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(b){c("promiseDone")(b.sendLightweightReaction(a.$1.threadId,a.$1.postType,a.$1.ownerID,f))},"MStoriesPostReplyInstance");if(c("MFBStoriesGatingConfig").showLWRTrails){var g="\n          "+c("MFBStoriesReactionAnimationConfig").uris[e]+"&"+c("uniqueID")(),h=k[e];c("MStoriesToast").newShowReactionSentSuccessToast(g,h,b.getTarget())}else{g=c("MFBStoriesReactionAnimationConfig").uris[e];h="reaction_type_"+e;c("MStoriesToast").showReactionSentSuccessToast(g,h)}}};c("MFBStoriesGatingConfig").showLWRTrails?this.$3.push(c("Stratcom").listen("click","m-stories-reply-reaction-li",c("throttle")(b,l))):this.$3.push(c("Stratcom").listen("click","m-stories-reply-reaction-li",b));this.$3.push(c("Stratcom").listen("click","m-stories-reply-emoji-li",function(b){var e=(b=b.getTarget())!=null?(b=b.firstChild)!=null?b.data:b:b;if(!e||e.length===0)return;c("Bootloader").loadModules(["MStoriesMutationAPIs"],function(b){c("promiseDone")(b.sendMessage(a.$1.threadId,e,a.$1.postType,a.$1.ownerID,d("MStoriesLoggingConstants").REPLY_TYPES.LIGHT_WEIGHT))},"MStoriesPostReplyInstance");c("MStoriesToast").showReplySentSuccessToast(e)}))};b.listenForReplyInput=function(){var b=this,e=i._("{Placeholder string}",[i._param("Placeholder string","Reply...")]).toString(),f=function(a){return i._("\u0631\u062f \u0639\u0644\u0649 {Story's owner name}",[i._param("Story's owner name",a)]).toString()},g=c("Stratcom").listen("focus","m-stories-reply-input",function(){if(b.$8())b.$9(),b.$1.input.blur();else{document.removeEventListener("touchmove",d("MStoriesUtils").touchMoveListener);var e=a.getInstance().$2;e&&e.reset();c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER);e=b.$1.input.value;b.$1.ownerName&&(!e||e.length===0)&&(b.$1.input.placeholder=f(b.$1.ownerName))}}),h=c("Stratcom").listen("blur","m-stories-reply-input",function(){if(!b.$8()){document.addEventListener("touchmove",d("MStoriesUtils").touchMoveListener,{passive:!1});d("MViewport").scrollToTop();c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null);var a=b.$1.input.value;(!a||a.length===0)&&(b.$1.input.placeholder=e)}}),j=c("Stratcom").listen("click","m-stories-reply-send-button",function(){b.$1.input.value="",b.$1.input.placeholder=e}),k=c("Stratcom").listen("keyup","m-stories-reply-input",function(a){var c=a.getRawEvent().key;c==="Enter"&&(a.prevent(),b.$1.sendButton.click())});this.$3.push(j,g,h,k)};b.$8=function(){return this.$1.arDialog!=null&&!this.$4};b.$9=function(){var a=this;c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE);c("Stratcom").listen(d("MStoriesStratcomEvents").ARMADILLO_DIALOG_DISMISS,null,function(b){b.getData().isHardBlock||(a.$4=!0),c("Stratcom").removeCurrentListener(),a.$1.arDialog&&c("CSS").hide(a.$1.arDialog),c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY)});this.$1.arDialog&&c("CSS").show(this.$1.arDialog)};b.listenForSwipeReply=function(){var a=this,b=c("Stratcom").listen(d("MStoriesStratcomEvents").SWIPE_REPLY,null,function(){if(!c("MFBStoriesGatingConfig").enableSwipeReply)return;a.$1.input.focus()});this.$3.push(b)};b.listenForProfileDiv=function(){var a=this,b=c("Stratcom").listen("blur","m-stories-reply-input",function(){return c("CSS").addClass(a.$1.profilePicDiv,"hidden_elem")}),d=c("Stratcom").listen("focus","m-stories-reply-input",function(){a.$8()||c("CSS").removeClass(a.$1.profilePicDiv,"hidden_elem")});this.$3.push(b,d)};return a}();g["default"]=b}),98);
__d("MStoriesTransitionSwipeDetector",["MStoriesStratcomEvents","MStoriesUIConstants","MViewport","Run","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.getRawEvent();if(!a)return null;a=a.targetTouches[0];return{x:a.pageX+d("MViewport").getScrollLeft(),y:a.pageY+d("MViewport").getScrollTop()}}a=function(){var a=this;this.$7=function(){a.$3=null,a.$4=0,a.$5=0,a.$2&&(a.$2.remove(),a.$2=null)};this.$6=function(b){a.$3=null;if(b.getPrevented())return;a.$7();a.$3=h(b);a.$2=c("Stratcom").listen("touchmove",null,a.$10)};this.$8=function(b){a.$3=null;if(b.getPrevented())return;if(Math.abs(a.$5)>d("MStoriesUIConstants").SWIPE_DOWN_DISTANCE&&a.$5>0){c("Stratcom").invoke(d("MStoriesStratcomEvents").SWIPE_DOWN);return}if(Math.abs(a.$5)>d("MStoriesUIConstants").SWIPE_DISTANCE&&a.$5<0){c("Stratcom").invoke(d("MStoriesStratcomEvents").SWIPE_UP);a.$7();return}Math.abs(a.$4)>d("MStoriesUIConstants").SWIPE_DISTANCE&&(a.$4>0?c("Stratcom").invoke(d("MStoriesStratcomEvents").SWIPE_LEFT):c("Stratcom").invoke(d("MStoriesStratcomEvents").SWIPE_RIGHT));a.$7()};this.$10=function(b){if(b.getPrevented()){a.$7();return}b=h(b);if(!b)return;var c=a.$3;if(!c)return;a.$4=b.x-c.x;a.$5=b.y-c.y};this.$9=function(){a.$1.forEach(function(a){return a.remove()}),a.$7()};this.$1=[c("Stratcom").listen("touchstart","m-stories-prev-button",this.$6),c("Stratcom").listen("touchstart","m-stories-next-button",this.$6),c("Stratcom").listen("touchstart","m-stories-thread-media",this.$6),c("Stratcom").listen("touchcancel",null,this.$7),c("Stratcom").listen("touchend",null,this.$8)];d("Run").onLeave(this.$9)};g["default"]=a}),98);
__d("MStoriesThread",["cx","CloseStoryGesture","DOM","MStoriesBottomSheetController","MStoriesDOMUtils","MStoriesGating","MStoriesMutationAPIs","MStoriesOptimisticInfo","MStoriesStratcomEvents","MStoriesTransitionSwipeDetector","MStoriesUtils","Run","StoryNavigationGesture","Stratcom"],(function(a,b,c,d,e,f,g,h){"use strict";var i="m:stories:thread:modal";a=function(){function a(){var b=this;this.$1=[];this.$6=function(){b.$1.forEach(function(a){return a.remove()}),document.removeEventListener("touchmove",d("MStoriesUtils").touchMoveListener),a.$5=null};this.$4=new(c("MStoriesTransitionSwipeDetector"))();this.$1=[c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE),b.showCover()}),c("Stratcom").listen(d("MStoriesStratcomEvents").MEDIA_PLAY,null,function(){b.hideCover()}),c("Stratcom").listen(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").VIEWER_SHEET_HIDE,null),c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY,null)}),c("Stratcom").listen("click",i,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null)}),c("Stratcom").listen("touchstart","m-stories-prev-button",function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE,null)}),c("Stratcom").listen("touchend","m-stories-prev-button",function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY,null)}),c("Stratcom").listen("touchstart","m-stories-next-button",function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE,null)}),c("Stratcom").listen("touchend","m-stories-next-button",function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY,null)}),c("Stratcom").listen("click","m-stories-viewer-add-story-button",function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE)}),c("Stratcom").listen(d("MStoriesStratcomEvents").SWIPE_LEFT,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").PREV_BUCKET,null,{gesture:c("StoryNavigationGesture").SWIPE_LEFT})}),c("Stratcom").listen(d("MStoriesStratcomEvents").SWIPE_RIGHT,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").NEXT_BUCKET,null,{gesture:c("StoryNavigationGesture").SWIPE_RIGHT})}),c("Stratcom").listen(d("MStoriesStratcomEvents").SWIPE_DOWN,null,function(){c("Stratcom").invoke("click","m-stories-close-story-button",{gesture:c("CloseStoryGesture").SWIPE_DOWN_EXIT})}),c("Stratcom").listen(d("MStoriesStratcomEvents").SWIPE_UP,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").SWIPE_REPLY),d("MStoriesGating").shouldShowNTViewerSheet()&&c("Stratcom").invoke(d("MStoriesStratcomEvents").VIEWER_SHEET_OPEN)}),c("Stratcom").listen(d("MStoriesStratcomEvents").OVERLAY_INTERACTION_PAUSE,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE)}),c("Stratcom").listen(d("MStoriesStratcomEvents").OVERLAY_INTERACTION_PLAY,null,function(){c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY)})];document.addEventListener("touchmove",d("MStoriesUtils").touchMoveListener,{passive:!1});d("Run").onLeave(this.$6)}a.getInstance=function(){this.$5||(this.$5=new a());return this.$5};var b=a.prototype;b.showCover=function(){if(this.$2!==null)return;this.$2=d("DOM").create("div",{className:"modal",sigil:i});d("DOM").appendContent(this.$3,this.$2);this.setAriaHiddenForComponentsUnderModal("true")};b.hideCover=function(){this.$2!=null&&(d("DOM").remove(this.$2),this.$2=null,this.setAriaHiddenForComponentsUnderModal("false"))};b.setAriaHiddenForComponentsUnderModal=function(a){var b;(b=document.getElementById("m-stories-add-to-button"))==null?void 0:b.setAttribute("aria-hidden",a);(b=document.getElementById("m-stories-card-header"))==null?void 0:b.setAttribute("aria-hidden",a);(b=document.getElementById("m-stories-corner-button"))==null?void 0:b.setAttribute("aria-hidden",a)};a.initOptimistic=function(b){var c=b.root,e=b.threadID,f=a.getInstance();f.$2=null;f.$3=c;f=d("MStoriesDOMUtils").find(b.root,"div","m-stories-thread-media");if(f){c=d("MStoriesOptimisticInfo").getUploadForThreadID(e);c&&(d("DOM").setContent(f,d("MStoriesOptimisticInfo").getCanvasForViewer(c)),d("MStoriesOptimisticInfo").markUploadSeen(c))}};a.init=function(b){var e=a.getInstance();e.$2=null;e.$3=b.root;var f=function(){b.storyGraphQLID!=null?d("MStoriesMutationAPIs").markThreadSeen(null,b.storyGraphQLID):d("MStoriesMutationAPIs").markThreadSeen(b.threadID),b.bottomSheetContainer!=null&&c("MStoriesBottomSheetController").setContainer(b.bottomSheetContainer),d("MStoriesGating").shouldShowNTViewerSheet()&&b.shouldExpandViewerSheet===!0&&(c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null),c("Stratcom").invoke(d("MStoriesStratcomEvents").CLICK_STORY_IN_VIEWER_SHEET)),c("Stratcom").invoke("m:stories:card-loaded",null,null)};b.tapOverlay==null?f():(c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PAUSE),e.$1.push(c("Stratcom").listen("click","m-stories-tap-overlay",function(){f(),d("DOM").hide(b.tapOverlay),c("Stratcom").invoke(d("MStoriesStratcomEvents").MEDIA_PLAY)})))};return a}();g["default"]=a}),98);